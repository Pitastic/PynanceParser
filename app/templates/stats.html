
{% extends 'layout.html' %}

{% block content %}

<header class="container">
    <nav>
        <ul>
            <li>
                <hgroup>
                    <h3>
                        Statistiken
                    </h3>
                    {{IBAN}}
                </hgroup>
            </li>
        </ul>
        <ul>
            <li>
                &larrhk; <a href="/{{IBAN}}?{{ request.query_string.decode('utf-8')|safe }}">zurück</a>
            </li>
        </ul>
    </nav>
</header>

<main class="container">

    <h4>Top Beträge</h4>
    <section class="grid s-12 m-6-6 l-4-4-4">

        <article>
            <h5>Kategorien</h5>
            <table class="ranking">
                <tbody>
                    {% for c, amount in sums.categories.items() %}
                    <tr>
                        <td>{{c}}</td>
                        <td>{{"%.2f"|format(amount|round(2))}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </article>

        <article>
            <h5>Tags</h5>
            <table class="ranking">
                <tbody>
                    {% for t, amount in sums.tags.items() %}
                    <tr>
                        <td>{{t}}</td>
                        <td>{{"%.2f"|format(amount|round(2))}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </article>

    </section>

</main>

<footer>
    <section class="bottom-fixed right">
        <button class="{% if filters.keys() %}primary{%else%}secondary outline{%endif%}" data-target="filter-popup" onclick="toggleModal(event)">
            &#128269;
        </button>
    </section>
</footer>

<!-- PopUps -->
{% from 'macros.html' import filterDialog %}
{{ filterDialog(filters) }}

<script src="{{ url_for('static', filename='js/stats.js') }}"></script>

{% endblock %}