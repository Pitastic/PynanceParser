{% extends 'layout.html' %}

{% block content %}

<main>
    {% if groups or ibans %}
    Wähle
    {% endif %}
    {% if groups %}
    eine Gruppe:
    <ul>
        {% for group in groups %}
        <li><a href="/{{group}}">{{group}}</a></li>
        {% endfor %}
    </ul>
        {% if ibans %}
        oder
        {% endif %}
    {% endif %}
    {% if ibans %}
    ein Konto:
    <ul>
    {% for iban in ibans %}
    <li><a href="/{{iban}}">{{iban}}</a></li>
    {% endfor %}
    </ul>
    {% else %}
    Es sind noch keine Konten vorhanden. Starte mit deinem ersten Import...
    {% endif %}

    <p>
        <button id="add-iban-btn">
        Konten verwalten
        </button>
        <button id="add-group-btn">
        Gruppen verwalten
        </button>
    </p>
</main>

<!-- PopUps -->
<div id="add-iban" style="display: none;" class="popup">
    <h2>Neue Transactionen</h2>
    <p>Importiere Kontoumsätze in folgendem Konto:</p>
    <p>
        <input type="text" name="iban-input" id="iban-input" placeholder="DE XXXXXXXXXXXXX" list="iban-list">
        <datalist id="iban-list">
            {% for iban in ibans %}
            <option value="{{iban}}"></option>
            {% endfor %}
        </datalist>
    </p>
    <p>
        <div id="file-drop-area">
            <span id="file-label">Datei hier ablegen oder auswählen (PDF / CSV / HTML)</span>
            <input type="file" id="file-input" name="file-input" accept=".csv,.pdf,.html" style="display: none;">
        </div>
    </p>
    <p>
        <button onclick="uploadFile()">Import</button>
        <button onclick="truncateDB()">Löschen</button>
    </p>
    <button onclick="closePopup('add-iban')">Close</button>
</div>


<div id="add-group" style="display: none;" class="popup">
    <h2>Gruppen anlegen</h2>
    <p>Wähle Konten aus, die zu einer Gruppe hinzugefügt werden sollen:</p>
    <ul>
        {% for iban in ibans %}
        <li>
            <label>
                <input type="checkbox" name="iban-checkbox" value="{{iban}}">
                {{iban}}
            </label>
        </li>
        {% endfor %}
    </ul>
    <p>
        <input type="text" name="groupname-input" id="groupname-input" placeholder="" list="group-list">
        <datalist id="group-list">
            {% for group in groups %}
            <option value="{{group}}"></option>
            {% endfor %}
        </datalist>
    </p>
    <p>
        <button onclick="saveGroup()">Speichern</button>
    </p>
    <button onclick="closePopup('add-group')">Close</button>
</div>

<script src="{{ url_for('static', filename='js/index.js') }}"></script>

{% endblock %}
